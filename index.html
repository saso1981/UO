<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Analizzatore Gold Pro - Global Database 2025</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: #fff; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #2d2d2d; }
        th, td { padding: 12px; border: 1px solid #444; text-align: left; }
        th { background: #d4a017; color: #000; }
        .future { background: #2ecc71; padding: 5px 10px; border-radius: 4px; font-weight: bold; }
    </style>
</head>
<body>

    <h2>üèÜ Analizzatore Gold (Global 2025 - All Leagues)</h2>
    <div id="orario-attuale"></div>
    
    <textarea id="palinsesto" placeholder="Incolla qui il palinsesto HTML..." style="width:100%; height:150px; background:#333; color:#fff;"></textarea>
    <br>
    <button onclick="processaGold()" style="padding:15px 30px; cursor:pointer; background:#d4a017; border:none; font-weight:bold;">GENERA SCHEDINA GOLD</button>

    <div id="risultati">
        <table id="tabella-match">
            <thead>
                <tr>
                    <th>Ora</th>
                    <th>Match</th>
                    <th>Target</th>
                    <th>Probabilit√†</th>
                    <th>Stato</th>
                </tr>
            </thead>
            <tbody id="match-body"></tbody>
        </table>
    </div>

    <script>
        // DATABASE GLOBALE 2025 - Tutti i campionati monitorati
        const globalDB = {
            "Roma": { "prob": 0.93, "target": "U3.5" },
            "Egitto": { "prob": 0.90, "target": "U2.5" },
            "Marocco": { "prob": 0.89, "target": "U2.5" },
            "Melbourne Victory": { "prob": 0.87, "target": "O2.5" },
            "Flamengo": { "prob": 0.86, "target": "U3.5" },
            "Urawa Reds": { "prob": 0.84, "target": "U3.5" },
            // Filtri Lega Generici se la squadra non √® in lista
            "DEFAULT_SERIE_A": { "prob": 0.88, "target": "U3.5" },
            "DEFAULT_AFCON": { "prob": 0.89, "target": "U2.5" },
            "DEFAULT_ALGERIA": { "prob": 0.88, "target": "U2.5" },
            "DEFAULT_BRAZIL": { "prob": 0.82, "target": "U3.5" }
        };

        function processaGold() {
            const rawData = document.getElementById('palinsesto').value;
            const adesso = new Date();
            const body = document.getElementById('match-body');
            body.innerHTML = '';

            // Estrazione match (logica semplificata per il tuo uso)
            let matches = estraiMatch(rawData); 

            // SCUDO TEMPORALE + FILTRO GLOBALE
            const matchFiltrati = matches.filter(m => {
                const [ore, minuti] = m.ora.split(':');
                const dataMatch = new Date();
                dataMatch.setHours(parseInt(ore), parseInt(minuti), 0);
                return dataMatch > new Date(adesso.getTime() + 5 * 60000);
            });

            // Ordinamento per importanza globale
            matchFiltrati.sort((a, b) => (globalDB[b.squadra]?.prob || 0.5) - (globalDB[a.squadra]?.prob || 0.5));

            matchFiltrati.forEach(m => {
                const info = globalDB[m.squadra] || { prob: 0.75, target: "U3.5" };
                body.innerHTML += `<tr>
                    <td>${m.ora}</td>
                    <td>${m.squadra}</td>
                    <td>${info.target}</td>
                    <td>${(info.prob * 100).toFixed(0)}%</td>
                    <td><span class="future">DISPONIBILE</span></td>
                </tr>`;
            });
        }

        function estraiMatch(html) {
            // Qui inserisci la tua regex specifica per il sito che usi
            return []; 
        }

        setInterval(() => {
            document.getElementById('orario-attuale').innerText = "Orario Sistema: " + new Date().toLocaleTimeString();
        }, 1000);
    </script>
</body>
</html>
