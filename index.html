<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>UO Gold Pro - Global Fixed 2025</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0b0b0c; color: #e0e0e0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; }
        textarea { width: 100%; height: 120px; background: #161618; color: #00ff41; border: 1px solid #d4a017; padding: 12px; border-radius: 8px; font-family: monospace; outline: none; }
        button { width: 100%; padding: 18px; margin: 15px 0; background: #d4a017; color: #000; border: none; font-weight: bold; cursor: pointer; border-radius: 8px; font-size: 18px; text-transform: uppercase; }
        .gold-card { background: #161618; border: 3px solid #d4a017; padding: 25px; border-radius: 15px; text-align: center; box-shadow: 0 0 20px rgba(212, 160, 23, 0.2); }
        .verdetto { font-size: 3.5em; font-weight: 900; display: block; margin-top: 10px; }
        .dajeee { color: #00ff41; text-shadow: 0 0 15px #00ff41; }
        .quasi { color: #d4a017; }
        .occhio { color: #ff4444; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #161618; }
        th { background: #d4a017; color: #000; padding: 10px; font-size: 11px; text-transform: uppercase; }
        td { padding: 10px; border-bottom: 1px solid #2a2a2c; font-size: 13px; }
        .auto-label { color: #3498db; font-size: 0.8em; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <textarea id="inputPalinsesto" placeholder="Incolla qui il palinsesto..."></textarea>
    <button onclick="UO_Engine_Final()">ðŸš€ GENERA SCHEDINA GOLD & CALCOLA SIMULTANEITÃ€</button>
    <div id="outputGold"></div>
    <table>
        <thead><tr><th>Ora</th><th>Match</th><th>Fonte/Lega</th><th>Target</th><th>%</th></tr></thead>
        <tbody id="listaDettaglio"></tbody>
    </table>
</div>

<script>
    const dbStatico = {
        "Al Ahly": { p: 0.94, t: "U3.5" },
        "Al Nassr": { p: 0.93, t: "U3.5" },
        "Arsenal": { p: 0.92, t: "O1.5" },
        "Benin": { p: 0.90, t: "U2.5" },
        "Botswana": { p: 0.89, t: "U2.5" },
        "WS Wanderers": { p: 0.84, t: "O2.5" }
    };

    const dbLeagues = {
        "Premier League": { p: 0.81, t: "U3.5" },
        "National League": { p: 0.83, t: "U3.5" },
        "African Nations": { p: 0.89, t: "U2.5" },
        "Saudi Professional": { p: 0.85, t: "U3.5" },
        "League Cup": { p: 0.82, t: "U3.5" },
        "Federation Cup": { p: 0.79, t: "U3.5" },
        "Cymru Premier": { p: 0.84, t: "U3.5" }
    };

    function UO_Engine_Final() {
        const raw = document.getElementById('inputPalinsesto').value;
        const righe = raw.split('\n');
        const adesso = new Date();
        let analizzati = [];

        righe.forEach(r => {
            const timeMatch = r.match(/(\d{2}:\d{2})/);
            if (timeMatch) {
                const ora = timeMatch[1];
                let lega = r.split(':')[0].trim();
                let nome = r.split(ora)[0].replace(lega + ":", "").replace(/\d{2}\.\d{2}/g, '').trim();

                let info = { p: 0.75, t: "U3.5", f: "DEFAULT" };
                
                // Cerca in DB Statico
                let keyS = Object.keys(dbStatico).find(k => nome.includes(k));
                if (keyS) {
                    info = { ...dbStatico[keyS], f: "ELITE" };
                } else {
                    // Cerca in DB Leghe (Case Insensitive)
                    let keyL = Object.keys(dbLeagues).find(k => lega.toLowerCase().includes(k.toLowerCase()));
                    if (keyL) {
                        info = { p: dbLeagues[keyL].p + (Math.random()*0.02), t: dbLeagues[keyL].t, f: "AUTO: " + keyL };
                    }
                }
                analizzati.push({ ora, nome, ...info });
            }
        });

        analizzati.sort((a, b) => b.p - a.p);
        const top5 = analizzati.slice(0, 5);
        let sim = top5.length === 5 ? top5.reduce((acc, x) => acc * x.p, 1) * 100 : 0;

        let txt = "Occhiooo!!", cl = "occhio";
        if (sim >= 75) { txt = "Dajeee"; cl = "dajeee"; }
        else if (sim >= 55) { txt = "Quasiii!"; cl = "quasi"; }

        let html = `<div class="gold-card"><div style="color:#d4a017">SIMULTANEITÃ€: <b>${sim.toFixed(2)}%</b></div><span class="verdetto ${cl}">${txt}</span><div style="margin-top:15px; text-align:left; display:inline-block;">`;
        top5.forEach(m => { html += `<div>âœ… ${m.ora} - ${m.nome} âž” <b>${m.t}</b> (${(m.p*100).toFixed(0)}%)</div>`; });
        document.getElementById('outputGold').innerHTML = html + "</div></div>";

        const tbody = document.getElementById('listaDettaglio');
        tbody.innerHTML = '';
        analizzati.forEach(a => {
            tbody.innerHTML += `<tr><td>${a.ora}</td><td>${a.nome}</td><td class="auto-label">${a.f}</td><td>${a.t}</td><td style="color:#00ff41; font-weight:bold;">${(a.p*100).toFixed(0)}%</td></tr>`;
        });
    }
</script>
</body>
</html>
